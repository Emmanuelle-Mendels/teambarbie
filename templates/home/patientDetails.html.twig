{% extends 'base.html.twig' %}

{% block title %}Doctogood | Patient File{% endblock %}

{% block body %}
    <section>
    <h1 class="text-center p-2">Patient file : {{ patient.firstName }} {{ patient.lastname }}</h1>
    <p></p>
<div class="d-flex flex-wrap justify-content-around">
    <div class="card d-flex align-items-center">
        <div class="card-body">
            <h3 class="text-primary card-title text-center">
                <svg class="bi bi-calendar3" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
                     xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
                    <path fill-rule="evenodd"
                          d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                </svg>
                Next appointment
            </h3>
            <div class="card-text text-dark text-center">20 juillet 2020 <br>10h00</div>
            <div class="text-center mt-3"><img src="https://img.icons8.com/metro/26/000000/phone.png"/>Patient's phone number : {{ patient.phone }}</div>
        </div>
    </div>
</div>

    <div class="d-flex flex-column align-items-center justify-content-around mt-4">
        <h3 class="pb-4">Prescription</h3>
    </div>
    {% if prescritpions is not null %}
        {% for prescritpion in prescritpions %}
            <h3>{{ prescritpion.medication.name }}</h3>
            <table class="table">
                <tbody>
                <tr>
                    <th>Start date</th>
                    <td>{{ prescritpion.startDate ? prescritpion.startDate|date('Y-m-d') : '' }}</td>
                </tr>
                <tr>
                    <th>End date</th>
                    <td>{{ prescritpion.startDate|date_modify('+' ~ prescritpion.duration ~ ' days')|date('Y-m-d') }}</td>
                </tr>
                <tr>
                    <th>Duration</th>
                    <td>{{ prescritpion.duration }} days</td>
                </tr>
                <tr>
                    <th>Morning</th>
                    <td>{{ prescritpion.morning ? 'Yes' : 'No' }}</td>
                </tr>
                <tr>
                    <th>Noon</th>
                    <td>{{ prescritpion.noon ? 'Yes' : 'No' }}</td>
                </tr>
                <tr>
                    <th>Evening</th>
                    <td>{{ prescritpion.evening ? 'Yes' : 'No' }}</td>
                </tr>
                </tbody>
            </table>
        {% endfor %}
    {% endif %}
        {% if prescritpions is empty %}
            <div class="text-center">This patient have no prescription currently.</div>
        {% endif %}
        <div class="d-flex flex-column align-items-center justify-content-around mt-4">
        <a class="btn btn-primary mb-4" href="{{ path('prescritpion_new', {'idPatient': patient.id}) }}">Add a prescription</a>
        </div>
    </section>
{% endblock %}
